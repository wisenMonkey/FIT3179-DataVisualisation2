{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "City comparison: CPI index by selected year",
  "width": 600,
  "height": 400,
  "data": { "url": "../data/cpi_city_year.csv" },

  "params": [
    {
      "name": "year_sel",
      "value": 2024,
      "bind": {
        "input": "select",
        "name": ": ",
        "options": [
          2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,
          2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,
          2021,2022,2023,2024
        ]
      }
    }
  ],

  "transform": [
    { "filter": "toNumber(datum.Year) == year_sel" }
  ],

  "mark": { "type": "bar" },

  "encoding": {
    "x": {
      "field": "City",
      "type": "nominal",
      "sort": [
        "Sydney","Melbourne","Brisbane","Adelaide",
        "Perth","Hobart","Darwin","Canberra"
      ],
      "title": "City",
      "axis": { "labelAngle": 0 }
    },
    "y": {
      "field": "CPI",
      "type": "quantitative",
      "title": "CPI index (All groups)"
    },
    "color": { "field": "City", "type": "nominal", "legend": null },
    "tooltip": [
      { "field": "City" },
      { "field": "Year" },
      { "field": "CPI", "title": "CPI index" }
    ]
  },

  "title": "CPI by city"
}